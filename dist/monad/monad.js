"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.Monad = void 0;
const __1 = require("..");
class Monad extends __1.Functor {
    static of(value) {
        return new Monad(value);
    }
    static fromValueOf(value) {
        return new Monad(JSON.parse(JSON.stringify(value.fork)));
    }
    constructor(value) {
        super(value);
    }
    ap(c) {
        return c.map((fn) => this.map(x => fn(x)))
            .fork;
    }
    chain(fn) {
        return Monad.of(this.map(x => fn(x)).fork).fork;
    }
    map(fn) {
        return Monad.of(super.map(x => fn(x)).fork);
    }
    get fork() {
        return this._value;
    }
    toString() {
        return JSON.stringify(this);
    }
    toValue() {
        return JSON.parse(this.toString());
    }
}
exports.Monad = Monad;
const myFunct = Monad.of(42);
myFunct.map(x => x * 2);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9uYWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvbW9uYWQvbW9uYWQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBQUEsMEJBQTZCO0FBSTdCLE1BQWEsS0FBa0IsU0FBUSxXQUFhO0lBQzNDLE1BQU0sQ0FBQyxFQUFFLENBQU8sS0FBVztRQUNoQyxPQUFPLElBQUksS0FBSyxDQUFPLEtBQUssQ0FBQyxDQUFDO0lBQ2hDLENBQUM7SUFFTSxNQUFNLENBQUMsV0FBVyxDQUFPLEtBQWtCO1FBQ2hELE9BQU8sSUFBSSxLQUFLLENBQU8sSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDakUsQ0FBQztJQUVELFlBQW1CLEtBQVc7UUFDNUIsS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQ2YsQ0FBQztJQUVNLEVBQUUsQ0FBYyxDQUF5QjtRQUM5QyxPQUFPLENBQUMsQ0FBQyxHQUFHLENBQVcsQ0FBQyxFQUFvQixFQUFFLEVBQUUsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFJLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7YUFDdEUsSUFBSSxDQUFDO0lBQ1YsQ0FBQztJQUVNLEtBQUssQ0FBVSxFQUEwQjtRQUM5QyxPQUFPLEtBQUssQ0FBQyxFQUFFLENBQ2IsSUFBSSxDQUFDLEdBQUcsQ0FBVyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FDcEMsQ0FBQyxJQUFJLENBQUM7SUFDVCxDQUFDO0lBRU0sR0FBRyxDQUFJLEVBQW1CO1FBRS9CLE9BQU8sS0FBSyxDQUFDLEVBQUUsQ0FDYixLQUFLLENBQUMsR0FBRyxDQUFJLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUM5QixDQUFDO0lBQ0osQ0FBQztJQUVELElBQVcsSUFBSTtRQUNiLE9BQU8sSUFBSSxDQUFDLE1BQU0sQ0FBQztJQUNyQixDQUFDO0lBRU0sUUFBUTtRQUNiLE9BQU8sSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUM5QixDQUFDO0lBRU0sT0FBTztRQUNaLE9BQU8sSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsUUFBUSxFQUFFLENBQUMsQ0FBQztJQUNyQyxDQUFDO0NBQ0Y7QUExQ0Qsc0JBMENDO0FBRUQsTUFBTSxPQUFPLEdBQVUsS0FBSyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQztBQUVwQyxPQUFPLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRnVuY3RvciB9IGZyb20gJy4uJztcblxuZXhwb3J0IHR5cGUgRm5BdG9CPEEsIEI+ID0gKHZhbDogQSkgPT4gQjtcblxuZXhwb3J0IGNsYXNzIE1vbmFkPE1WYWwgPSBhbnk+IGV4dGVuZHMgRnVuY3RvcjxNVmFsPiB7XG4gIHB1YmxpYyBzdGF0aWMgb2Y8VFZhbD4odmFsdWU6IFRWYWwpOiBNb25hZDxUVmFsPiB7XG4gICAgcmV0dXJuIG5ldyBNb25hZDxUVmFsPih2YWx1ZSk7XG4gIH1cblxuICBwdWJsaWMgc3RhdGljIGZyb21WYWx1ZU9mPFRWYWw+KHZhbHVlOiBNb25hZDxUVmFsPik6IE1vbmFkPFRWYWw+IHtcbiAgICByZXR1cm4gbmV3IE1vbmFkPFRWYWw+KEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodmFsdWUuZm9yaykpKTtcbiAgfVxuXG4gIHB1YmxpYyBjb25zdHJ1Y3Rvcih2YWx1ZTogTVZhbCkge1xuICAgIHN1cGVyKHZhbHVlKTtcbiAgfVxuXG4gIHB1YmxpYyBhcDxSID0gdW5rbm93bj4oYzogTW9uYWQ8Rm5BdG9CPE1WYWwsIFI+Pik6IE1vbmFkPFI+IHtcbiAgICByZXR1cm4gYy5tYXA8TW9uYWQ8Uj4+KChmbjogKHZhbDogTVZhbCkgPT4gUikgPT4gdGhpcy5tYXA8Uj4oeCA9PiBmbih4KSkpXG4gICAgICAuZm9yaztcbiAgfVxuXG4gIHB1YmxpYyBjaGFpbjxSID0gYW55PihmbjogRm5BdG9CPE1WYWwsIE1vbmFkPFI+Pik6IE1vbmFkPFI+IHtcbiAgICByZXR1cm4gTW9uYWQub2Y8TW9uYWQ8Uj4+KFxuICAgICAgdGhpcy5tYXA8TW9uYWQ8Uj4+KHggPT4gZm4oeCkpLmZvcmssXG4gICAgKS5mb3JrO1xuICB9XG5cbiAgcHVibGljIG1hcDxSPihmbjogRm5BdG9CPE1WYWwsIFI+KTogTW9uYWQ8Uj4ge1xuICAgIC8vIHJldHVybiBuZXcgRnVuY3RvcjxSPihmbih0aGlzLl92YWx1ZSkpO1xuICAgIHJldHVybiBNb25hZC5vZihcbiAgICAgIHN1cGVyLm1hcDxSPih4ID0+IGZuKHgpKS5mb3JrLFxuICAgICk7XG4gIH1cblxuICBwdWJsaWMgZ2V0IGZvcmsoKTogTVZhbCB7XG4gICAgcmV0dXJuIHRoaXMuX3ZhbHVlO1xuICB9XG5cbiAgcHVibGljIHRvU3RyaW5nKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHRoaXMpO1xuICB9XG5cbiAgcHVibGljIHRvVmFsdWUoKTogTVZhbCB7XG4gICAgcmV0dXJuIEpTT04ucGFyc2UodGhpcy50b1N0cmluZygpKTtcbiAgfVxufVxuXG5jb25zdCBteUZ1bmN0OiBNb25hZCA9IE1vbmFkLm9mKDQyKTtcblxubXlGdW5jdC5tYXAoeCA9PiB4ICogMik7XG4iXX0=